<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<app-breadcrumbs title="identification" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header align-items-center d-flex">
        <h4 class="card-title mb-0 flex-grow-1">Default Select</h4>
      </div>
      <!-- end card header -->
      <div class="card-body">
        <p class="text-muted">
        </p>
        <div class="live-preview">
          <div class="row">
            <!-- Colonne pour la liste déroulante de sélection des programmes -->
            <div class="col-lg-3">
              <div class="row">
                <div class="col-md-8">
                  <div class="me-6"> <!-- Ajout d'une marge à gauche -->
                    <label for="programInput" class="form-label">Programme</label>
                    <select class="form-select mb-3" id="programInput">
                      <option selected>Choose...</option>
                      <option *ngFor="let programme of programmes" [ngValue]="programme">{{ programme.name }}</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4 d-flex align-items-center">
                  <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(LunchDataModal)"
                    data-bs-toggle="modal" data-bs-target="#LunchDemoDataModal">
                    <i class="bx bx-plus-medical"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="row">
                <div class="col-md-8">
                  <div class="me-6">
                    <label for="gouvernoratSelect" class="form-label">Gouvernorat</label>
                    <select class="form-select mb-3" id="gouvernoratSelect"(change)="onChangeGouvernaurat($event)">
                      <option selected>Choose...</option>
                      <!-- Utilisation de *ngFor pour itérer sur la liste des gouvernorats -->
                      <option *ngFor="let gouvernorat of gouvernorats" [value]="gouvernorat.id">{{ gouvernorat.name }}</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-4 d-flex align-items-center">
                  <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(GouvernoratModal)"
                    data-bs-toggle="modal" data-bs-target="#GouvernoratModal">
                    <i class="bx bx-plus-medical"></i> 
                  </button>
                </div>
              </div>
            </div>
        
         <!-- Colonne pour la liste déroulante de sélection des délégations -->
<div class="col-lg-3">
  <div class="row">
    <div class="col-md-8">
      <div class="me-6">
        <label for="delegationSelect" class="form-label">Délégation</label>
        <select class="form-select mb-3" id="delegationSelect" (change)="onChangeDelegation($event)">
          <option selected>Choose...</option>
          <!-- Utilisation de *ngFor pour itérer sur la liste des délégations -->
          <option *ngFor="let delegation of delegations" [value]="delegation.id">{{ delegation.name }}</option>
        </select>
      </div>
    </div>
    <div class="col-md-4 d-flex align-items-center">
      <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(delegationModal)"
        data-bs-toggle="modal" data-bs-target="#delegationModal">
        <i class="bx bx-plus-medical"></i> 
      </button>
    </div>
  </div>
</div>

            </div>
          </div>
            </div>
          </div>
        </div>
        
        

            <div class="col-lg-2 col-md-3">
              <label for="communeSelect" class="form-label">Communes</label>
              <select class="form-select mb-3" id="communeSelect" (change)="onChangeCommune($event)">
                <option selected>Choose...</option>
                <option *ngFor="let commune of communes" [value]="commune.id">{{ commune.name }}</option>

              </select>
            </div>
            <div class="col-md-4 d-flex align-items-center">
              <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(communeModal)"
                data-bs-toggle="modal" data-bs-target="#communeModal">
                <i class="bx bx-plus-medical"></i> 
              </button>
            </div>
            
            <div class="col-lg-2 col-md-3">
              <div>
                <label for="quartierInput" class="form-label">Quartier</label>
<div>
  <input type="text" class="form-control mb-3" id="quartierInput" [(ngModel)]="quartierName" (keypress)="validateInput($event)" />
  <div *ngIf="alphaNumericErrorMessage" class="text-danger">
    <i class="fas fa-exclamation-circle"></i> {{ alphaNumericErrorMessage }}
  </div>
</div>
     </div>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header align-items-center d-flex"></div>
                <!-- end card header -->
                <div class="card-body">
                  <div class="row">
                    <div class="col-lg-12">
                      <div ngbAccordion activeIds="static-1" [closeOthers]="false" class="custom-accordionwithicon accordion-border-box">
                        <div ngbAccordionItem class="material-shadow" id="static-1">
                          <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                            <button ngbAccordionButton>
                              Données générales:
                            </button>
                          </div>
                          <div ngbAccordionCollapse>
                            <div ngbAccordionBody>
                              <div class="container">
                                <form >
                                  <div class="row form-group mb-3">
                                    <label for="surface" class="col-sm-4 col-form-label">Surface (Ha)</label>
                                    <div class="col-sm-8">
                                      <input 
                                      type="number" 
                                      class="form-control" 
                                      id="surface" 
                                      [(ngModel)]="donneeGenerale.surface"
                                      name="surface" 
                                      (input)="onInputChange()" 
                                      (keypress)="validateNumberInput($event)" 
                                      (wheel)="preventWheelChange($event)" 
                                      required 
                                    />
                                    <div *ngIf="numericErrorMessage" class="text-danger">
                                      <i class="fas fa-exclamation-circle"></i> {{ numericErrorMessage }}
                                    </div>

                                  </div>
                                </div>
                                  <div class="row form-group mb-3">
                                    <label for="surface-urb" class="col-sm-4 col-form-label">Surface Urbanisée (ha)</label>
                                    <div class="col-sm-8">
                                      <input 
                                      type="number" 
                                      class="form-control" 
                                      id="surface-urb" 
                                      [(ngModel)]="donneeGenerale.surfaceUrbanisee" 
                                      name="surfaceUrbanisee" 
                                      (input)="onInputChange()" 
                                      (keypress)="validateNumberInputsurfaceurbanise($event)" 
                                      (wheel)="preventWheelChange($event)" 
                                      required 
                                    />
                                    <div *ngIf="numericErrorMessagesurfaceubanise" class="text-danger">
                                      <i class="fas fa-exclamation-circle"></i> {{ numericErrorMessagesurfaceubanise }}
                                    </div>                                    </div>
                                  </div>
                                  <div class="row form-group mb-3">
                                    <label for="nombre-logements" class="col-sm-4 col-form-label">Nombre de logements</label>
                                    <div class="col-sm-8">
                                      <input 
                                      type="number" 
                                      class="form-control" 
                                      id="nombre-logements" 
                                      [(ngModel)]="donneeGenerale.nombreLogements" 
                                      name="nombreLogements" 
                                      (input)="onInputChange()" 
                                      (keypress)="validateNumberInputnbr($event)" 
                                      (wheel)="preventWheelChange($event)"
                                      required 
                                    />
                                    <div *ngIf="numericErrorMessagesurnbr" class="text-danger">
                                      <i class="fas fa-exclamation-circle"></i> {{ numericErrorMessagesurnbr }}
                                    </div>
                                                                    </div>
                                  </div>
                                  <div class="row form-group mb-3">
                                    <label for="densite" class="col-sm-4 col-form-label">Densité (logts/ha)</label>
                                    <div class="col-sm-8">
  <input 
                                        type="number" 
                                        class="form-control" 
                                        id="densite" 
                                        [(ngModel)]="donneeGenerale.densite" 
                                        name="densite" 
                                        readonly 
                                      />
                                    </div>
                                  </div>

                                </form>

                                <div class="accordion nesting2-accordion custom-accordionwithicon accordion-border-box mt-3" id="accordionnesting2">
                                  <div ngbAccordion [closeOthers]="true" class="custom-accordionwithicon accordion-border-box">
                                    <div ngbAccordionItem class="material-shadow" id="static-5">
                                      <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                                        <button ngbAccordionButton>
                                          Toylologie logements:
                                        </button>
                                      </div>
                                      <div ngbAccordionCollapse>
                                        <div ngbAccordionBody>
                                          <div class="container">
                                            <div class="row mb-3">
                                              <div class="col-md-12 mb-3">
                                                <label>Logements Typiques</label>
                                                <button class="btn btn-primary float-end" (click)="addLogementTypique()">Ajouter un logement typique</button>
                                              </div>
                                              <div *ngFor="let logement of logementsTypiques; let i = index" class="row mb-3">
                                                <div *ngIf="logement" class="col-md-3">
                                                  <select class="form-control" [(ngModel)]="logement.type">
                                                    <option [ngValue]="LogementType.MAISON">Maison</option>
                                                    <option [ngValue]="LogementType.HOUCH">Houch</option>
                                                  </select>
                                                </div>
                                                <div *ngIf="logement" class="col-md-3">
                                                  <input type="number" class="form-control" [(ngModel)]="logement.pourcentage" placeholder="Pourcentage">
                                                </div>
                                                <div *ngIf="logement" class="col-md-3">
                                                  <select class="form-control" [(ngModel)]="logement.qualite">
                                                    <option [ngValue]="Qualite.BONNE">Bonne</option>
                                                    <option [ngValue]="Qualite.MOYENNE">Moyenne</option>
                                                    <option [ngValue]="Qualite.MAUVAISE">Mauvaise</option>
                                                  </select>
                                                </div>
                                              </div>
                                              <div class="col-md-12 text-end">
                                                <button   class="btn btn-success" (click)="saveLogementsTypiques()" >Enregistrer les logements typiques</button>
                                              </div>
                                          </div>
                                          <div id="logements-modernes">
                                            <div class="col-md-12 mb-3">
                                              <label>Logements Modernes</label>
                                              <button class="btn btn-primary float-end" (click)="addLogementModerne()">Ajouter un logement moderne</button>
                                            </div>
                                            <div class="row mb-3" *ngFor="let logement of logementsModernes; let i = index">
                                              <div class="col-md-3">
                                                <select class="form-control" [(ngModel)]="logement.type">
                                                  <option [ngValue]="LogementType.APPARTEMENT">Appartement</option>
                                                  <option [ngValue]="LogementType.VILLA">Villa</option>
                                                </select>
                                              </div>
                                              <div class="col-md-3">
                                                <input type="number" class="form-control" [(ngModel)]="logement.pourcentage" placeholder="Pourcentage">
                                              </div>
                                              <div class="col-md-3">
                                                <select class="form-control" [(ngModel)]="logement.qualite">
                                                  <option [ngValue]="Qualite.BONNE">Bonne</option>
                                                  <option [ngValue]="Qualite.MOYENNE">Moyenne</option>
                                                  <option [ngValue]="Qualite.MAUVAISE">Mauvaise</option>
                                                </select>
                                              </div>
                                            </div>
                                            <div class="col-md-12 text-end">
                                              <button class="btn btn-success" (click)="saveLogementsModernes()">Enregistrer les logements modernes</button>
                                            </div>
                                            <div class="col-md-12 mt-3">
                                              <h4>Liste de tous les logements</h4>
                                              <table class="table table-striped">
                                                <thead>
                                                  <tr>
                                                    <th>Type</th>
                                                    <th>Pourcentage</th>
                                                    <th>Qualité</th>
                                                    <th>Action</th>
                                                  </tr>
                                                </thead>
                                                <tbody>
                                                  <tr *ngFor="let logement of allLogements; let i = index">
                                                    <td>{{ logement.type }}</td>
                                                    <td>{{ logement.pourcentage }}%</td>
                                                    <td>{{ logement.qualite }}</td>
                                                    <td>
                                                   <button class="btn btn-danger" (click)="deleteLogement(logement.id)">Supprimer</button>
                                                    </td>
                                                  </tr>
                                                </tbody>
                                              </table>
                                          </div>
                                            
                                        </div>
                                      </div>
                                    </div>
                                    </div>
                                  </div>
                                 
                                        <div ngbAccordionItem class="material-shadow" id="static-7">
                                          <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                                            <button ngbAccordionButton>
                                              Taux de couverture des réseaux:
                                            </button>
                                          </div>
                                          <div ngbAccordionCollapse>
                                            <div ngbAccordionBody>
                                              <div class="table-responsive">
                                                <form [formGroup]="userForm" (ngSubmit)="createCouvertureReseau()">
                                                  <table class="invoice-table table table-borderless table-nowrap mb-0">
                                                    <thead class="align-middle">
                                                      <tr class="table-active">
                                                        <th scope="col" style="width: 50px;">#</th>
                                                        <th scope="col">Type</th>
                                                        <th scope="col" style="width: 120px;">
                                                          <div class="d-flex currency-select input-light align-items-center">Pourcentage</div>
                                                        </th>
                                                        <th scope="col" class="text-end" style="width: 105px;"></th>
                                                      </tr>
                                                    </thead>
                                                    <tbody formArrayName="items">
            <tr *ngFor="let item of items().controls; let i = index" [formGroupName]="i">
                                                        <th scope="row"></th>
                                                        <td class="text-start">
                                                          <div class="mb-2">
                                                            <select class="form-control bg-light border-0" formControlName="typeReseauId">
                                                              <option *ngFor="let typeReseau of typeReseaux" [value]="typeReseau?.id">{{ typeReseau?.type }}</option>
                                                            </select>
                                                            <div class="invalid-feedback">Please select a type</div>
                                                          </div>
                                                        </td>
                                                        <td>
                                                          <div>
                                                            <input type="number" formControlName="pourcentage" class="form-control bg-light border-0" placeholder="Enter pourcentage">
                                                            <div class="invalid-feedback">Please enter a pourcentage</div>
                                                          </div>
                                                        </td>
                                                        <td class="product-removal">
                                                          <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(typeReseauModal)">
                                                            <i class="bx bx-plus-medical"></i>Add Type
                                                          </button>
                                                          &nbsp;&nbsp;&nbsp; <!-- Non-breaking spaces -->
                                                          <button type="button" class="btn btn-success" (click)="removeItem(i)">Delete</button>
                                                        </td>
                                                      </tr>
                                                    </tbody>
                                                    <tfoot>
                                                      <tr>
                                                        <td colspan="5">
                                                          <button type="button" class="btn btn-soft-secondary fw-medium" (click)="addItem()" >
                                                            <i class="ri-add-fill me-1 align-bottom"></i> Add Item
                                                          </button>
                                                        </td>
                                                      </tr>
                                                      <tr>
                                                        <td colspan="5">
                                                          <button type="submit" class="btn btn-primary">Submit</button>
                                                        </td>
                                                      </tr>
                                                    </tfoot>
                                                  </table>
                                                </form>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        
                                        
                                   
                                  <div ngbAccordionItem class="material-shadow" id="static-7">
                                    <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                                      <button ngbAccordionButton>
                                        observation:
                                      </button>
                                    </div>
                                    <div ngbAccordionCollapse>
                                      <div ngbAccordionBody>
                                        <div class="row">
                                          <p class="text-muted">
                                            Use attribute with numerous options
                                            to show value with choice's option.
                                          </p>
  
                                        <textarea class="form-control" id="exampleTextarea" rows="3" [(ngModel)]="observation" name="observation" required></textarea>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  
                                  
                                </div>
                                
                            </div>
                          </div>
                        </div>
                      </div>
                          
                          
                    </div>

                    <div ngbAccordion activeIds="static-1" [closeOthers]="true"
                      class="custom-accordionwithicon accordion-border-box mt-3">
                      <div ngbAccordionItem class="material-shadow" id="static-1">
                        <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                          <button ngbAccordionButton>
                            Programme d'intervention et Coût prévisionnel:
                          </button>
                        </div>
                        <div ngbAccordionCollapse>
                          <div ngbAccordionBody>
                            <div class="accordion nesting2-accordion custom-accordionwithicon accordion-border-box"
                              id="accordionnesting2">
                              <div ngbAccordion [closeOthers]="true"
                                class="custom-accordionwithicon accordion-border-box">
                                <div ngbAccordionItem class="material-shadow" id="static-5">
                                  <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                                    <button ngbAccordionButton>
                                      Composentes:
                                    </button>
                                  </div>
                                  <div ngbAccordionCollapse>
                                    <div ngbAccordionBody>
                                      <form action="">
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="nameInput" class="form-label">Infrastructures
                                            </label>
                                          </div>
                                          <td class="product-removal">
                                            <button type="button" class="btn btn-dark custom-toggle active" (click)="LunchModal(InfrastructurestypeModal)">
                                              <i class="bx bx-plus-medical"></i>Add Type
                                            </button>
                                            &nbsp;&nbsp;&nbsp; <!-- Non-breaking spaces -->
                                            <button type="button" class="btn btn-success" (click)="removeItem(i)" >Delete</button >
                                          </td>
                                          <div class="mb-2">
                                            <select class="form-control bg-light border-0" formControlName="InfrastructurestypeId">
                                              <option *ngFor="let Infrastructurestype of Infrastructurestypes" [value]="Infrastructurestype?.id">{{ Infrastructurestype?.type }}</option>
                                            </select>
                                            <div class="invalid-feedback">Please select a type</div>
                                          </div>
                                        </div>
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="websiteUrl" class="form-label">Quantitées</label>
                                          </div>
                                          <div class="col-lg-9">
                                            <input type="text" class="form-control" id="websiteUrl" placeholder="" />
                                          </div>
                                        </div>
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="dateInput" class="form-label">Coût en Md
                                            </label>
                                          </div>
                                          <div class="col-lg-9">
                                            <input type="text" class="form-control" id="dateInput" />
                                          </div>
                                        </div>
                                      </form>
                                    </div>
                                  </div>
                                </div>

                                <div ngbAccordionItem class="material-shadow" id="static-5">
                                  <div ngbAccordionHeader class="accordion-header border-0 bg-transparent">
                                    <button ngbAccordionButton>
                                      Amélioration de l'habitat( U ):
                                    </button>
                                  </div>
                                  <div ngbAccordionCollapse>
                                    <div ngbAccordionBody>
                                      <form action="">
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="nameInput" class="form-label">Equipement Publics
                                            </label>
                                          </div>
                                          <div class="col-lg-9">
                                            <select class="form-select" id="gouvernoratSelect">
                                              <option selected>
                                                Choose...
                                              </option>
                                              <option>
                                                Salle Polyvalente
                                              </option>
                                              <option>Option 2</option>
                                              <option>Option 3</option>
                                            </select>
                                          </div>
                                        </div>
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="websiteUrl" class="form-label">Quantitées</label>
                                          </div>
                                          <div class="col-lg-9">
                                            <input type="text" class="form-control" id="websiteUrl" placeholder="" />
                                          </div>
                                        </div>
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="dateInput" class="form-label">Coût en Md
                                            </label>
                                          </div>
                                          <div class="col-lg-9">
                                            <input type="text" class="form-control" id="dateInput" />
                                          </div>
                                        </div>
                                        <div class="row mb-3">
                                          <div class="col-lg-3">
                                            <label for="dateInput" class="form-label">Total
                                            </label>
                                          </div>
                                          <div class="col-lg-9">
                                            <input type="text" disabled class="form-control" id="dateInput" />
                                          </div>
                                        </div>
                                      </form>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row mt-3">
                      <div class="col-lg-4">
                        <div class="card">
                          <div class="card-header">
                            <div class="text-center">

                              <label class="form-label mb-0">
                                Multiple File Upload
                              </label>
                            </div>
                          </div>
                          <!-- end card header -->

                          <div class="card-body">
                            <dropzone class="dropzone_sec"></dropzone>
                          </div>
                          <!-- end dropzon-preview -->
                          <!-- end card body -->
                        </div>
                        <!-- end card -->
                      </div>

                      <div class="col-lg-4">
                        <div class="card">
                          <div class="card-header">
                            <div class="text-center">

                              <label class="form-label mb-0">
                                Multiple File Upload
                              </label>
                            </div>
                          </div>
                          <!-- end card header -->

                          <div class="card-body">
                            <dropzone class="dropzone_sec"></dropzone>
                          </div>
                          <!-- end dropzon-preview -->
                          <!-- end card body -->
                        </div>
                        <!-- end card -->
                      </div>

                      <div class="col-lg-4">
                        <div class="card">
                          <div class="card-header">
                            <div class="text-center">

                              <label class="form-label mb-0">
                                Multiple File Upload
                              </label>
                            </div>
                          </div>
                          <!-- end card header -->

                          <div class="card-body">
                            <dropzone class="dropzone_sec"></dropzone>
                          </div>
                          <!-- end dropzon-preview -->
                          <!-- end card body -->
                        </div>
                        <!-- end card -->
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="text-center">
                        <button type="button" class="btn btn-primary" (click)="saveData()">Enregistrer</button>

                      </div>
                    </div>
                  </div>

                  <div class="col-lg-12">
                    <div class="card">
                      <div class="card-header">
                        <h4 class="card-title mb-0">
                          Markers, Circles and Polygons
                        </h4>
                      </div>
                      <!-- end card header -->

                      <div class="card-body">
                        <div id="map" style="height: 400px;"></div>
                        <!-- <div
                            style="height: 300px"
                            leaflet
                            [leafletOptions]="markers"
                            [leafletLayers]="markersLayers"
                          ></div> -->
                      </div>
                      <!-- end card-body -->
                    </div>
                    <!-- end card -->
                  </div>
                </div>
                <!-- end card-body -->
                <!-- end card -->
              </div>
              <!--end col-->
            </div>
          </div>
          <div class="live-preview">
            <ng-template #LunchDataModal let-modal>
              <div class="modal-body">
                <form>
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Programme Name</label>
                      <div>
                        <table class="table table-bordered" id="example">
                          <thead class="thead-light">
                            <tr>
                              <th>#</th>
                              <th>Programme Name</th>
                              <th class="text-right">Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let programme of programmes; let i = index">
                              <td>{{ i + 1 }}</td> <!-- Display index + 1 as ID -->
                              <td>{{ programme.name }}</td>
                              <td class="text-right">
                                <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category"
                                  (click)="deleteProgramme(programme.id)">
                                  Delete
                                </button>
                              </td>
                            </tr>
                            
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Programme</label>
                      <input type="text" class="form-control" [(ngModel)]="programmeName" name="programmeName">
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
           <button type="submit" class="btn btn-primary" (click)="createProgramme({ id: 0, name: programmeName })" [disabled]="!programmeName.trim()">Save</button>

                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </ng-template>
          </div>


          <div class="live-preview">
            <ng-template #GouvernoratModal let-modal>
              <div class="modal-body">
                <form>
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Gouvernorat Name</label>
                      <div>
                        <table class="table table-bordered" id="example">
                          <thead class="thead-light">
                            <tr>
                              <th>#</th>
                              <th>Gouvernorat Name</th>
                              <th class="text-right">Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let gouvernorat of gouvernorats; let i = index">
                              <td>{{ i + 1 }}</td> <!-- Display index + 1 as ID -->
                              <td>{{ gouvernorat.name }}</td>
                              <td class="text-right">
                                <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category"
                                  (click)="deleteGouvernoratById(gouvernorat.id)">
                                  Delete
                                </button>
                              </td>
                            </tr>
                            
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Gouvernorat</label>
                      <input type="text" class="form-control" [(ngModel)]="gouvernoratName" name="gouvernoratName">
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" (click)="createGouvernorat({ id: 0, name: gouvernoratName})" [disabled]="!gouvernoratName.trim()">Save</button>

                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </ng-template>
          </div>
          
          <div class="live-preview">
            <ng-template #delegationModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createDelegation()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Delegation Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Delegation Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let delegation of delegations; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ delegation.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteDelegation(delegation.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Gouvernorat</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedGouvernoratId" name="selectedGouvernoratId" (change)="onChangeGouvernaurat($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let gouvernorat of gouvernorats" [value]="gouvernorat.id">{{ gouvernorat.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Delegation</label>
                      <input type="text" class="form-control" [(ngModel)]="delegationName" name="delegationName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!delegationName.trim() || !selectedGouvernoratId">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>
          
          <div class="live-preview">
            <ng-template #communeModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createCommune()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Commune Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Commune Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let Commune of communes; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ Commune.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteCommune(Commune.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Delegation</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedDelegationId" name="selectedDelegationId" (change)="onChangeDelegation($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let delegation of delegations" [value]="delegation.id">{{ delegation.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Commune</label>
                      <input type="text" class="form-control" [(ngModel)]="communeName" name="communeName" required>
                    </div>
                    <div class="col-lg-12">
            
          <div class="live-preview">
            <ng-template #delegationModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createDelegation()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Delegation Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Delegation Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let delegation of delegations; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ delegation.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteDelegation(delegation.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Gouvernorat</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedGouvernoratId" name="selectedGouvernoratId" (change)="onChangeGouvernaurat($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let gouvernorat of gouvernorats" [value]="gouvernorat.id">{{ gouvernorat.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Delegation</label>
                      <input type="text" class="form-control" [(ngModel)]="delegationName" name="delegationName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!delegationName.trim() || !selectedGouvernoratId">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>
          
          <!-- mettre ca  -->
<!-- mettre ca -->
























          
          <div class="live-preview">
            <ng-template #communeModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createCommune()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Commune Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Commune Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let Commune of communes; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ Commune.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Delegation</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedDelegationId" name="selectedDelegationId" (change)="onChangeDelegation($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let delegation of delegations" [value]="delegation.id">{{ delegation.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Commune</label>
                      <input type="text" class="form-control" [(ngModel)]="communeName" name="communeName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!communeName.trim() || !selectedDelegationId">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>           <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!communeName.trim() || !selectedDelegationId">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>
          <div class="live-preview">
            <ng-template #communeModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createCommune()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Commune Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Commune Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let Commune of communes; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ Commune.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteCommune(Commune.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Delegation</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedDelegationId" name="selectedDelegationId" (change)="onChangeDelegation($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let delegation of delegations" [value]="delegation.id">{{ delegation.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Commune</label>
                      <input type="text" class="form-control" [(ngModel)]="communeName" name="communeName" required>
                    </div>
                    <div class="col-lg-12">
            

                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>
          <div class="live-preview">
            <ng-template #delegationModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createDelegation()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Delegation Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Delegation Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let delegation of delegations; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ delegation.name }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteDelegation(delegation.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="me-6">
                      <label for="gouvernoratSelect" class="form-label">Gouvernorat</label>
                      <select class="form-select mb-3" id="gouvernoratSelect" [(ngModel)]="selectedGouvernoratId" name="selectedGouvernoratId" (change)="onChangeGouvernaurat($event)">
                        <option value="" disabled selected>Choose...</option>
                        <option *ngFor="let gouvernorat of gouvernorats" [value]="gouvernorat.id">{{ gouvernorat.name }}</option>
                      </select>
                    </div>
                    <div class="col-lg-12">
                      <label class="form-label">Add Delegation</label>
                      <input type="text" class="form-control" [(ngModel)]="delegationName" name="delegationName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!delegationName.trim() || !selectedGouvernoratId">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              

            </ng-template>
          </div>
          <div class="live-preview">
            <ng-template #typeReseauModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createNewTypeReseau()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Type Reseau Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Type Reseau Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let typeReseau of typeReseaux; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ typeReseau.type }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category" (click)="deleteTypeReseau(typeReseau.id)">
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
          
                    <div class="col-lg-12">
                      <label class="form-label">Add Type Reseau</label>
                      <input type="text" class="form-control" [(ngModel)]="typeReseauName" name="typeReseauName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!typeReseauName.trim()">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </ng-template>
          </div>
          <div class="live-preview">
            <ng-template #InfrastructurestypeModal let-modal>
              <div class="modal-body">
                <form (ngSubmit)="createNewInfrastructurestype()">
                  <div class="row g-3">
                    <div class="col-lg-12">
                      <label class="form-label">Type Infrastructures Name</label>
                      <table class="table table-bordered" id="example">
                        <thead class="thead-light">
                          <tr>
                            <th>#</th>
                            <th>Type Infrastructures Name</th>
                            <th class="text-right">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let Infrastructurestype of Infrastructurestypes; let i = index">
                            <td>{{ i + 1 }}</td>
                            <td>{{ Infrastructurestype.type }}</td>
                            <td class="text-right">
                              <button type="button" class="btn btn-secondary rounded f-14 p-2 delete-category"  (click)="deleteInfrastructurestype(Infrastructurestype.id)"
                                >
                                Delete
                              </button>
                            </td>
                          </tr>
                        </tbody>
                        
                       
                      </table>
                    </div>
          
                    <div class="col-lg-12">
                      <label class="form-label">Add Type Infrastructure</label>
                      <input type="text" class="form-control" [(ngModel)]="InfrastructurestypeName" name="InfrastructurestypeName" required>
                    </div>
                    <div class="col-lg-12">
                      <div class="hstack gap-2 justify-content-end">
                        <button type="button" class="btn btn-light" (click)="close()" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary" [disabled]="!InfrastructurestypeName.trim()">Save</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </ng-template>
          </div>
          
        </div>